{"version":3,"sources":["../../src/Popover.tsx"],"names":["DEFAULT_POPOVER_MARGIN_TOP","DEFAULT_POPOVER_MARGIN_LEFT","Popover","isOpen","onClose","children","content","contentEl","setContentEl","buttonEl","setButtonEl","handleClickBackground","left","top","leftResut","offsetLeft","topResult","offsetTop","clientHeight","clientWidth","document","body","el","position","width","height","e","stopPropagation"],"mappings":"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","sourcesContent":["import React, { useState, useMemo } from 'react';\n\ntype Props = {\n  isOpen: boolean\n  onClose: () => void\n  children: React.ReactChild\n  content: React.ReactNode\n};\n\nconst DEFAULT_POPOVER_MARGIN_TOP = 8;\nconst DEFAULT_POPOVER_MARGIN_LEFT = 40;\n\nexport default function Popover({\n  isOpen, onClose, children, content,\n}: Props) {\n  const [contentEl, setContentEl] = useState<any>(null);\n  const [buttonEl, setButtonEl] = useState<any>(null);\n\n  const handleClickBackground = () => {\n    onClose();\n  };\n\n  const { left, top } = useMemo(() => {\n    if (!buttonEl || !contentEl) {\n      return {\n        left: 0,\n        top: 0,\n      };\n    }\n    let leftResut = buttonEl?.offsetLeft;\n    let topResult = buttonEl?.offsetTop + buttonEl.clientHeight + DEFAULT_POPOVER_MARGIN_TOP;\n    // 오른쪽으로 넘어버리면\n    if (leftResut + contentEl.clientWidth > document.body.clientWidth) {\n      leftResut -= (\n        leftResut + contentEl.clientWidth - document.body.clientWidth + DEFAULT_POPOVER_MARGIN_LEFT\n      );\n    }\n\n    // 아래쪽으로 넘어버리면\n    if (topResult + contentEl.clientHeight > document.body.clientHeight) {\n      topResult -= (topResult + contentEl.clientHeight - document.body.clientHeight);\n    }\n\n    return {\n      left: leftResut,\n      top: topResult,\n    };\n  }, [contentEl, buttonEl]);\n\n  if (!isOpen) {\n    return (\n      <div>\n        {children}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div\n        ref={(el) => setButtonEl(el)}\n      >\n        {children}\n      </div>\n      <div\n        style={{\n          position: 'absolute',\n          left: 0,\n          top: 0,\n          width: document.body.clientWidth,\n          height: document.body.clientHeight,\n        }}\n        onClick={handleClickBackground}\n      >\n        <div\n          ref={(el) => setContentEl(el)}\n          style={{\n            position: 'absolute',\n            left,\n            top,\n          }}\n          onClick={(e) => e.stopPropagation()}\n        >\n          {content}\n        </div>\n      </div>\n    </>\n  );\n}\n"],"file":"Popover.js"}